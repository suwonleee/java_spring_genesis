# 📘 웹 서버, 웹 애플리케이션 서버
웹은 HTTP를 기반으로 통신을 한다.   
  
* 클라이언트 -> 인터넷 -> 서버 : HTTP Request 
* 서버 -> 인터넷 -> 클라이언트 : HTTP Response   

## 📖 웹 서버  
`HTTP`를 기반으로 동작하는 웹 애플리케이션을 위한 정적 서버이다.        
주로, **정적 리소스를 제공**하고 이 외에도 기타 부가기능을 제공한다.       

**정적 리소스(파일)이란? 🤔**   
* HTML
* CSS
* JS
* 이미지
* 영상 등등..  

우리가 알만한 대표적인 웹 서버로는 `Nginx` 와 `Apache`가 있다.    
 
## 📖 웹 애플리케이션 서버(WAS)  
`HTTP`를 기반으로 동작하는 웹 애플리케이션을 위한 동적 서버이다.   
기본적인 **웹 서버 기능(정적 리소스 제공)은 물론,**      
**프로그램 코드를 실행해서 애플리케이션 로직을 수행한 동적 리소스를 제공해준다.**       
프로그램은 주로 `서블릿`, `JSP`, `스프링 MVC` 을 이용한다.     

**동적 리소스란? 🤔**
* 동적 HTML, HTTP API(JSON)  

우리가 알만한 대표적인 웹 애플리케이션 서버로는 `Tomcat` 와 `Jetty`가 있으며       
**WAS는 애플리케이션 코드를 실행하는데 더 특화되어 있다.**     
       
## 📖 웹 서버 VS 웹 애플리케이션 서버(WAS)
   
* 웹 서버 : 정적 리소스(파일)   
* WAS : 애플리케이션 로직(동적 리소스)   
   
사실 둘의 용어도 경계도 모호한건 사실이다.    
왜냐하면 `웹 서버`도 프로그램을 실행하는 기능을 포함하기도 하며     
`웹 애플리케이션 서버`도 웹 서버의 기능을 제공하기 때문이다.    
그래서 각각 영역(언어)들은 `웹 서버`와 `웹 애플리케이션 서버`를 구분하는 기준이 다르다.       
       
**☕ 자바에서는 서블릿 컨테이너 기능을 제공하면 WAS 라고 말을한다.**   
(참고로, 서블릿 없이 자바 코드를 실행하는 서버 프로그램도 있다.)       

## 📖 웹 시스템 구성 요소   
> 가장 간단한 구조만을 이야기한다.          

![web-architecture-basic](https://user-images.githubusercontent.com/50267433/126512318-96af3d2f-b07d-4ead-ba45-cc1201fd7d66.PNG)
  

`WAS`는 정적 리소스, 애플리케이션 로직 모두 제공이 가능하기에       
`WAS + DB` 정도만 있어도 가장 기본적인 웹 시스템 환경을 구성할 수 있다.        
  
![web-architecture-basic-error](https://user-images.githubusercontent.com/50267433/126512380-7ad5a964-8d02-4020-ac7a-5c5c58ba506d.PNG)     
      
그러나, 이렇게 WAS 단일로만 시스템을 구축을 하게 된다면   
**WAS에 장애가 발생했을시(죽을시) 가용 서버 자체가 없기에 오류 화면도 노출 불가능하며**  
**WAS가 너무 많은 역할을 담당하게 되기에 오히려 서버 과부하가 발생할 수 있다.**             
    
예를 들면, 가장 비싼(중요) 애플리케이션 로직이 정적 리소스 때문에 수행이 어려울 수 있다.          
사실, **정적 리소스는 애초에 크기가 크고 무겁기에 웹 성능을 떨어뜨리는 주 원인이기도 하다.**         
   
이러한 문제를 해결하기 위해서 개발자는 **관심사 분리**     
즉, `웹 애플리케이션 서버` 앞에 `일반 웹 서버(프록시 서버)`를 놓는 방식을 권장하고 있다.      
     
### 📄 프록시 서버(관심사의 분리)     
`WAS`만을  사용했을 때 발생하는 문제점을 해결하기 위해       
`WAS` 앞에 `일반 웹 서버`를 놓는 `프록시 서버` 방식을 이용한다.     
     
![web-architecture-modern](https://user-images.githubusercontent.com/50267433/126512453-20c25f29-79bf-4a5f-9391-378f188d7ffb.PNG)         
      
**정적 리소스에 대한 요청**은 **프록시 서버(웹 서버)가 처리**를 하고          
**애플리케이션 로직과 같은 동적인 처리**가 필요하면, **WAS에 요청을 위임**한다.        
결과적으로 **WAS는 중요한 애플리케이션 로직 처리만 전담하게 된다.**              
   
![web-architecture-modern-scaleout](https://user-images.githubusercontent.com/50267433/126512479-0089520c-e4e6-4297-a077-6aba18a4f233.PNG)        
![web-architecture-modern-error-solve](https://user-images.githubusercontent.com/50267433/126512508-e06752f9-58e6-4bb0-aeb7-1eef12a22217.PNG)     
   
또한, 리소스 관리를 효율적으로 할 수 있는데      
`정적 리소스`가 많아지면 `웹 서버`를 증설시키면 되고       
`애플리케이션 리소스`가 많아지면 `WAS`를 증설시키면 된다.       
     
이 밖에도 `정적 리소스`는 값이 변하지 않으므로 **웹 서버는 캐싱을 사용할 수 있으며(CDN)**       
`로드밸런싱`, `HTTP2 프르토콜로 변환` , `CERT 보안`, `오류화면 노출` 기능들도 사용할 수 있다.          
(`gzip 압축`, `지연 로딩`등 정적 리소스에 대한 **웹 성능 향상 작업도 할 수 있다.**)       
   
참고로, API 만 제공한다면 굳이 `웹 서버`를 놓을 필요는 없긴하다.     







 

     




