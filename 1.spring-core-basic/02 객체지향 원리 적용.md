# ê°ì²´ì§€í–¥ ì›ë¦¬ ì ìš©
## ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ (ì‹œë‚˜ë¦¬ì˜¤)   
* **ì•…ë• ê¸°íšì :** 
  - ì„œë¹„ìŠ¤ ì˜¤í”ˆ ì§ì „ì— í• ì¸ ì •ì±…ì„ ì§€ê¸ˆì²˜ëŸ¼ ê³ ì • ê¸ˆì•¡ í• ì¸ì´ ì•„ë‹ˆë¼    
  - ì¢€ ë” í•©ë¦¬ì ì¸ ì£¼ë¬¸ ê¸ˆì•¡ë‹¹ í• ì¸í•˜ëŠ” ì •ë¥  í• ì¸ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì–´ìš” 
  . ì˜ˆë¥¼ ë“¤ë©´, VIPëŠ” 10% í• ì¸ì„ ì‹œì¼œì£¼ëŠ”ê±°ì£    
* **ìˆœì§„ ê°œë°œì :**   
  - ì²˜ìŒ ë¶€í„° ê·¸ê±´ ì•„ë‹ˆë¼ê³  í–ˆì–ì•„ìš”...
* **ì•…ë• ê¸°íšì :**    
  - **[ì• ìì¼ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ì„ ì–¸](https://agilemanifesto.org/iso/ko/manifesto.html) ëª°ë¼ìš”? ê³„íšì„ ë”°ë¥´ê¸°ë³´ë‹¤ëŠ” ë³€í™”ì— ëŒ€ì‘í•˜ê¸°ë¥¼..**   
      
ì´ì „ì— ì‘ì„±í–ˆë˜ `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ, `DiscountPolicy` í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.       

**DiscountPolicy êµ¬í˜„**
```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

// 'DiscountPolicy'ë¼ëŠ” í• ì¸ ì •ì±… ê·œì¹™(ì¸í„°í˜ì´ìŠ¤)ì„ ë”°ë¥´ëŠ” êµ¬í˜„ì²´ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
public class RateDiscountPolicy implements DiscountPolicy {

  // í• ì¸ìœ¨ì€ 10%ë¡œ ê³ ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
  private int discountPercent = 10;

  // DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜ëœ 'discount' ë©”ì„œë“œë¥¼ ì‹¤ì œë¡œ êµ¬í˜„(Override)í•©ë‹ˆë‹¤.
  @Override
  public int discount(Member member, int price) {
    // ë§Œì•½ íšŒì›ì˜ ë“±ê¸‰ì´ VIPë¼ë©´,
    if (member.getGrade() == Grade.VIP) {
      // ì •í•´ì§„ í• ì¸ìœ¨(10%)ì„ ì ìš©í•œ ê¸ˆì•¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
      return price * discountPercent / 100;
    }
    // VIPê°€ ì•„ë‹ˆë¼ë©´ í• ì¸ì„ ì ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ (0ì› ë°˜í™˜).
    return 0;
  }
}
```
   
**DiscountPolicy í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ DiscountPolicyTest êµ¬í˜„**    
```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

// static importë¥¼ ì‚¬ìš©í•˜ì—¬ AssertJì˜ assertThat ë©”ì„œë“œë¥¼ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.*;

// RateDiscountPolicy í´ë˜ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
class RateDiscountPolicyTest {

  // í…ŒìŠ¤íŠ¸ ëŒ€ìƒì´ ë˜ëŠ” RateDiscountPolicy ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
  DiscountPolicy discountPolicy = new RateDiscountPolicy();

  // ì´ ë©”ì„œë“œê°€ í…ŒìŠ¤íŠ¸ ë©”ì„œë“œì„ì„ ì•Œë¦¬ëŠ” ì–´ë…¸í…Œì´ì…˜ì…ë‹ˆë‹¤.
  @Test
  // í…ŒìŠ¤íŠ¸ì˜ ì˜ë„ë¥¼ ì„¤ëª…í•˜ëŠ” ì´ë¦„ì„ ë¶™ì—¬ì¤ë‹ˆë‹¤. (ì˜ˆ: "VIPëŠ” 10% í• ì¸ì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤")
  @DisplayName("VIPëŠ” 10% í• ì¸ì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤")
  void vip_o() {
    // given: í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì¤€ë¹„ ë‹¨ê³„. VIP ë“±ê¸‰ì˜ íšŒì›ì„ ìƒì„±í•©ë‹ˆë‹¤.
    Member member = new Member(1L, "memberVIP", Grade.VIP);

    // when: ì‹¤ì œ í…ŒìŠ¤íŠ¸í•˜ë ¤ëŠ” ë™ì‘ì„ ì‹¤í–‰í•˜ëŠ” ë‹¨ê³„. 10000ì›ì§œë¦¬ ìƒí’ˆì— ëŒ€í•´ í• ì¸ ê¸ˆì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
    int discount = discountPolicy.discount(member, 10000);

    // then: ì‹¤í–‰ ê²°ê³¼ê°€ ì˜ˆìƒê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” ë‹¨ê³„.
    // AssertJ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ 'discount' ë³€ìˆ˜ì˜ ê°’ì´ 1000ê³¼ ê°™ì€ì§€ í™•ì¸í•©ë‹ˆë‹¤.
    assertThat(discount).isEqualTo(1000);
  }

  @Test
  @DisplayName("VIPê°€ ì•„ë‹ˆë©´ 10% í• ì¸ì´ ì ìš©ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤")
  void vip_x() {
    // given: BASIC ë“±ê¸‰ì˜ íšŒì›ì„ ìƒì„±í•©ë‹ˆë‹¤.
    Member member = new Member(2L, "memberBASIC", Grade.BASIC);

    // when: í• ì¸ ê¸ˆì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
    int discount = discountPolicy.discount(member, 10000);

    // then: í• ì¸ ê¸ˆì•¡ì´ 0ì›ì¸ì§€ ê²€ì¦í•©ë‹ˆë‹¤.
    assertThat(discount).isEqualTo(0);
  }
}
```

## ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì   
ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ì ìš©í•˜ê¸° ìœ„í•´, `OrderServiceImpl` ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³ ì í•œë‹¤.   

**ë³€ê²½ ì „**
```java
    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
```
   
**ê³ ì •í˜•ì—ì„œ ë³€ê²½ í›„**
```java
    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
    // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
```

í•˜ì§€ë§Œ, ë§Œì•½ ì´ì™€ ê°™ì€ ì½”ë“œê°€ 100ê°œ, 1000ê°œ, 10000ê°œê°€ ìˆë‹¤ë©´...?   
ì´ê°™ì´ ì£¼ì„ì„ ì²˜ë¦¬í•˜ê³  ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë„£ì–´ì£¼ëŠ” ì‘ì—…ì„ ì¼ì¼íˆ ë‹¤ í•´ì•¼í•œë‹¤.    

**ë¬¸ì œì  ë°œê²¬**   
* ìš°ë¦¬ëŠ” ì—­í• ê³¼ êµ¬í˜„ì„ ì¶©ì‹¤í•˜ê²Œ ë¶„ë¦¬í–ˆë‹¤ -> OK  
* ë‹¤í˜•ì„±ë„ í™œìš©í•˜ê³ , ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ë¥¼ ë¶„ë¦¬í–ˆë‹¤ -> OK
* OCP, DIP ê°™ì€ ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ì¶©ì‹¤íˆ ì¤€ìˆ˜í–ˆë‹¤. -> âŒ ê·¸ë ‡ê²Œ ë³´ì´ì§€ë§Œ ì•„ë‹ˆë‹¤.     
* DIP: ì£¼ë¬¸ ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ `OrderServiceImpl`ëŠ” `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ê³  ìˆë‹¤.  
  * í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‚´í´ë³´ë©´, ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬í˜„ í´ë˜ìŠ¤ë„ ì˜ì¡´í•˜ê³  ìˆë‹¤.   
  * ì´ë¥¼ ì¢€ ë” ì‰½ê²Œ í‘œí˜„í•˜ë©´ êµ¬í˜„ì²´ê°€ ì–´ë–¤ êµ¬í˜„ì²´ì¸ì§€ ì •í™•íˆ ì•Œê³  ìˆëŠ” ìƒíƒœì´ë‹¤(new í–ˆìœ¼ë‹ˆ)    
    * ì¶”ìƒ ì¸í„°í˜ì´ìŠ¤ ì˜ì¡´ : DiscountPolicy
    * êµ¬í˜„ í´ë˜ìŠ¤ ì˜ì¡´ : FixDiscountPolicy, RateDiscountPolicy
* OCP : ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ê¸°ëŠ¥ì„ ë³€ê²½, ì½”ë“œë¥¼ í™•ì¥í•  ìˆ˜ ìˆë‹¤ëŠ” ê°œë…         
  * ì§€ê¸ˆ ì½”ë“œëŠ” ê¸°ëŠ¥ì„ í™•ì¥í•˜ë©´, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤. ë”°ë¼ì„œ **OCPë¥¼ ìœ„ë°˜**í•œë‹¤.     
      
**ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ?ğŸ¤”**   
í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ `OrderServiceImpl` ì€      
`DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬í˜„ í´ë˜ìŠ¤ë„ í•¨ê»˜ ì˜ì¡´í•œë‹¤.     
ê·¸ë˜ì„œ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•  ë•Œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•œë‹¤.    
  
ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ? ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ë©´ ëœë‹¤.     
* **DIP ìœ„ë°˜** -> ì¶”ìƒì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ë³€ê²½í•œë‹¤.(ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´)      
    
**ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´ ì½”ë“œ**
```java
public class OrderServiceImpl {
    ...
    private final DiscountPolicy discountPolicy;

    ...
}
```
* ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ êµ¬í˜„í–ˆë‹¤.  
* í•˜ì§€ë§Œ êµ¬í˜„ì²´ë¥¼ í• ë‹¹ì‹œí‚¤ì§€ ì•Šì•„ì„œ `NullPointerException` ì´ ë°œìƒí•œë‹¤.   
  
**í•´ê²° ë°©ì•ˆ**    
ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´,      
ëˆ„êµ°ê°€ í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl`ì—     
`DiscountPolicy`ì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•œë‹¤.     

## ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬  
ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ ë¡œë¯¸ì˜¤ì™€ ì¤„ë¦¬ì—£ ê³µì—°ì´ë¼ ìƒê°í•˜ì.       
ë¡œë¯¸ì˜¤ì™€ ì¤„ë¦¬ì—£ì€ ëˆ„ê°€ ë˜ë˜ì§€ ê³µì—°ë§Œ ì˜ ë§ˆë¬´ë¦¬í•˜ë©´ ìƒê´€ì´ ì—†ë‹¤.      
í•˜ì§€ë§Œ, í•œ ê°€ì§€ ìš°ë¦¬ëŠ” ê°„ê³¼í•˜ê³  ìˆëŠ” ì‚¬ì‹¤ì´ ìˆë‹¤.        
ë¡œë¯¸ì˜¤ì™€ ì¤„ë¦¬ì—£ **ë°°ì—­ì„ ë§¡ì„ ë°°ìš°ëŠ” ëˆ„ê°€ ì •í•´ì£¼ëŠ” ê²ƒì¸ê°€?**        

ë§Œì•½ ë¡œë¯¸ì˜¤ ì—­í• ì„ ë§¡ëŠ” ë””ì¹´í”„ë¦¬ì˜¤ê°€ ì´ê°™ì€ ì—­í• ì„ í•œë‹¤ê³  ê°€ì •í•´ë³´ë©´ 
ë¡œë¯¸ì˜¤ëŠ” ì•„ë˜ì™€ ê°™ì€ ì—­í• ê³¼ ì±…ì„ì„ ê°€ì§„ë‹¤.  

* ì‹¤ì œ ì—°ê·¹ì„ ìˆ˜í–‰í•  ë¡œë¯¸ì˜¤ ì—­í•  
* ë°°ìš°ë¥¼ ì„­ì™¸í•˜ê³  ë°°ì—­ì„ ì§€ì •í•´ì£¼ëŠ” ì—­í•   
   
ì´ì™€ ê°™ì€ ì‚¬ì‹¤ë¡œ ë¯¸ë£¨ì–´ë³¼ ë•Œ, ë°°ìš°ê°€ ë°°ì—­ì„ í• ë‹¹í•˜ëŠ” ì—­í• ì„ ë„ë§¡ìœ¼ë©´       
ë‹¤ì–‘í•  ì—­í• ê³¼ ì±…ì„ì„ ê°€ì§„ í•  ì¼ì´ ë§ì€ ì‚¬ëŒì´ ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.    
 
**âœ” ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ì**     
* ë°°ìš°ëŠ” ë³¸ì¸ì˜ ì—­í• ì¸ ë°°ì—­ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì—ë§Œ ì§‘ì¤‘í•´ì•¼í•œë‹¤.    
* ë°°ìš°ëŠ” ìƒëŒ€ ì—¬ì ë°°ì—­ë¶„ì´ ì–´ë–¤ ë¶„ì´ ì˜¤ë”ë¼ë„ ì—­í• ì„ ì¶©ì‹¤íˆ ìˆ˜í–‰í•´ì•¼í•œë‹¤.   
* ê³µì—°ì„ êµ¬ì„±í•˜ê³ , ë‹´ë‹¹ ë°°ìš°ë¥¼ ì„­ì™¸í•˜ê³ , ë°°ìš°ë¥¼ ì§€ì •í•˜ëŠ” ì±…ì„ì€ **ê³µì—° ê¸°íšì**ê°€ í•´ì•¼í•  ì¼ì´ë‹¤.  
* ê³µì—° ê¸°íšìê°€ ì—†ë‹¤ë©´ ì´ë¥¼ ë§Œë“¤ê³ , ë°°ìš°ì™€ ê³µì—° ê¸°íšìì˜ ì±…ì„ì„ í™•ì‹¤íˆ ë¶„ë¦¬í•˜ì   
  
### AppConfig ë“±ì¥     
ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±`(config)`í•˜ê¸° ìœ„í•´,     
**êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**í•˜ê³ , **ì—°ê²°**í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì     

```java
package hello.core;

import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
    }

}
```
`AppConfig`ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ `êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±`í•œë‹¤.       
   
* MemberServiceImpl
* MemoryMemberRepository  
* OrderServiceImpl  
* FixDiscountPolicy  

`AppConfig`ëŠ” ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ë¥¼ `ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…`í•´ì¤€ë‹¤.     
* MemberServiceImpl -> MemoryMemberRepository  
* OrderServiceImpl -> MemoryMemberRepository, FixDiscountPolicy   
  
ì°¸ê³  : ì´ ê°™ì€ ì½”ë“œë¥¼ ì ìš©í•˜ê¸° ìœ„í•´,     
ê¸°ì¡´ `new í´ë˜ìŠ¤`í•˜ëŠ” ì˜ì—­ì„ ìƒì„±ìë¡œ ì£¼ì…ë°›ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•œë‹¤.     
  
**MemberServiceImpl**   
```java
package hello.core.member;

// MemberServiceë¼ëŠ” 'ê·œì¹™(ì¸í„°í˜ì´ìŠ¤)'ì„ ë”°ë¥´ëŠ” 'êµ¬í˜„ì²´' í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
public class MemberServiceImpl implements MemberService {

  // ì´ ì„œë¹„ìŠ¤ëŠ” MemberRepositoryë¼ëŠ” ë¶€í’ˆì„ í•„ìš”ë¡œ í•©ë‹ˆë‹¤. final í‚¤ì›Œë“œë¡œ ë¶ˆë³€ì„ì„ ë³´ì¥í•©ë‹ˆë‹¤.
  private final MemberRepository memberRepository;

  // ìƒì„±ì: ì´ í´ë˜ìŠ¤ê°€ ìƒì„±ë  ë•Œ, ì™¸ë¶€ì—ì„œ MemberRepositoryì˜ êµ¬í˜„ì²´ë¥¼ ì£¼ì…ë°›ìŠµë‹ˆë‹¤.
  public MemberServiceImpl(MemberRepository memberRepository) {
    this.memberRepository = memberRepository;
  }

  // íšŒì› ê°€ì… ê¸°ëŠ¥ì„ ì‹¤ì œë¡œ êµ¬í˜„í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
  @Override
  public void join(Member member) {
    // memberRepositoryì˜ save ê¸°ëŠ¥ì„ í˜¸ì¶œí•˜ì—¬ íšŒì›ì„ ì €ì¥í•©ë‹ˆë‹¤.
    memberRepository.save(member);
  }

  // íšŒì› ì¡°íšŒ ê¸°ëŠ¥ì„ ì‹¤ì œë¡œ êµ¬í˜„í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
  @Override
  public Member findMember(Long memberId) {
    // memberRepositoryì˜ findById ê¸°ëŠ¥ì„ í˜¸ì¶œí•˜ì—¬ íšŒì›ì„ ì°¾ì•„ ë°˜í™˜í•©ë‹ˆë‹¤.
    return memberRepository.findById(memberId);
  }
}
```

* ì„¤ê³„ ë³€ê²½ìœ¼ë¡œ `MemberServiceImpl`ì€ `MemoryMeberRepository`ë¥¼ ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.     
* ë‹¨ì§€, `MemberRepoistory`ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•œë‹¤.     
* `MemberServiceImpl` ì…ì¥ì—ì„œ ìƒì„±ìë¥¼ í†µí•´ **ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ì˜¬ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤.**      
* `MemberServiceImpl` ì€ ì´ì œë¶€í„° **ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€ì— ë§¡ê¸°ê³  `ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘`** í•˜ë©´ ëœë‹¤.    

ì´ì œë¶€í„°, ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ `AppConfig`ê°€ ë‹´ë‹¹í•œë‹¤.      
* **DIP ì™„ì„± :** 
  `MemberServiceImpl`ì€ `MemberRepository`ì¸ ì¶”ìƒì—ë§Œ ì˜ì¡´í•˜ë©´ ëœë‹¤.   
  ì¦‰, ì´ì œë¶€í„° êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ëª°ë¼ë„ ëœë‹¤.   
* **ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ :**  
  ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì—­í• ê³¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì–´ìˆë‹¤.   
   
**OrderServiceImpl**
```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;

// OrderServiceë¼ëŠ” 'ê·œì¹™(ì¸í„°í˜ì´ìŠ¤)'ì„ ë”°ë¥´ëŠ” 'êµ¬í˜„ì²´' í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
public class OrderServiceImpl implements OrderService {

  // ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” 'íšŒì› ì €ì¥ì†Œ'ì™€ 'í• ì¸ ì •ì±…'ì´ë¼ëŠ” ë‘ ê°€ì§€ ë¶€í’ˆì„ í•„ìš”ë¡œ í•©ë‹ˆë‹¤.
  private final MemberRepository memberRepository;
  private final DiscountPolicy discountPolicy;

  // ìƒì„±ì: ì™¸ë¶€ì—ì„œ MemberRepositoryì™€ DiscountPolicyì˜ êµ¬í˜„ì²´ë¥¼ ì£¼ì…ë°›ìŠµë‹ˆë‹¤.
  public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
    this.memberRepository = memberRepository;
    this.discountPolicy = discountPolicy;
  }

  // ì£¼ë¬¸ ìƒì„± ê¸°ëŠ¥ì„ ì‹¤ì œë¡œ êµ¬í˜„í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
  @Override
  public Order createOrder(Long memberId, String itemName, int itemPrice) {
    // 1. íšŒì› ì €ì¥ì†Œì—ì„œ íšŒì› ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
    Member member = memberRepository.findById(memberId);
    // 2. í• ì¸ ì •ì±…ì— íšŒì› ì •ë³´ì™€ ê°€ê²©ì„ ë„˜ê²¨ í• ì¸ ê¸ˆì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
    int discountPrice = discountPolicy.discount(member, itemPrice);
    // 3. ìµœì¢…ì ìœ¼ë¡œ ê³„ì‚°ëœ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì£¼ë¬¸ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
    return new Order(memberId, itemName, itemPrice, discountPrice);
  }
}
```
* ì„¤ê³„ ë³€ê²½ìœ¼ë¡œ `OrderServiceImpl`ì€ `FixDiscountPolicy`ë¥¼ ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
* ë‹¨ì§€ `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•œë‹¤.   
* `OrderServiceImpl`ì…ì¥ì—ì„œ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì£¼ì…ë ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤.   
* `OrderServiceImpl`ì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì£¼ì…ë ì§€ëŠ” `AppConfig`ê°€ ê²°ì •í•œë‹¤.   
* `OrderServiceImpl`ì€ ì´ì œë¶€í„° ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘í•˜ë©´ ëœë‹¤.    

**ì •ë¦¬**   
* `AppConfig`ë¥¼ í†µí•´ì„œ ê´€ì‹¬ì‚¬ë¥¼ í™•ì‹¤íˆ ë¶„ë¦¬í•˜ì  
* ë°°ì—­, ë°°ìš°ë¥¼ ìƒê°í•´ë³´ì    
* AppConfigëŠ” ê³µì—° ê¸°íšìë‹¤.   
* AppConfigëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì„ íƒí•œë‹¤. ë°°ì—­ì— ë§ëŠ” ë‹´ë‹¹ ë°°ìš°ë¥¼ ì„ íƒí•œë‹¤.      
* ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–»ê²Œ ë™ì‘í•´ì•¼ í• ì§€ ì „ì²´ êµ¬ì„±ì„ ì±…ì„ì§„ë‹¤.     
* ì´ì œ ê° ë°°ìš°ë“¤ì€ ë‹´ë‹¹ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤.    
  
## AppConfig ë¦¬íŒ©í„°ë§  

```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    private MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    private DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }

}
```
`new MemoryMemberRepository()` ì´ ë¶€ë¶„ì´ ì¤‘ë³µ ì œê±°ë˜ì—ˆë‹¤.   
ì´ì œ `MemoryMemberRepository` ë¥¼ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ë³€ê²½í•  ë•Œ í•œ ë¶€ë¶„ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤.  

## ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš© 

```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    private MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    private DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }

}
```
`AppConfig`ì—ì„œ í• ì¸ ì •ì±… ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” êµ¬í˜„ì„    
`FixDiscountPolicy`ì—ì„œ `RateDiscountPolicy()`ê°ì²´ë¡œ ë³€ê²½í–ˆë‹¤.    
ì•ìœ¼ë¡œë„ í• ì¸ ì •ì±…ì„ ë³€ê²½í•  ì¼ì´ ìˆë‹¤ë©´, `AppConfig`ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.   
í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ `OrderServiceImpl`ë¥¼ í¬í•¨í•´ì„œ **ì‚¬ìš© ì˜ì—­**ì˜ ì–´ë–¤ ì½”ë“œë„ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤.  
     
**êµ¬ì„± ì˜ì—­**ì€ ë‹¹ì—°íˆ ë³€ê²½ëœë‹¤.      
êµ¬ì„± ì—­í• ì„ í•˜ëŠ” AppConfigë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ëŠ” ê³µì—°ì˜ ê¸°íšìë¡œ ìƒê°í•˜ì      
ê³µì—° ê¸°íšìëŠ” ê³µì—° ì°¸ì—¬ìì¸ êµ¬í˜„ ê°ì²´ë“¤ì„ ëª¨ë‘ ì•Œì•„ì•¼ í•œë‹¤.     
      
![image-20210306153622347](https://user-images.githubusercontent.com/50267433/113473867-33890880-94a7-11eb-9c2e-0879a001ab14.png)
`êµ¬ì„±ì˜ì—­`ê³¼ `ì‚¬ìš©ì˜ì—­` ë¶„ë¦¬ëŠ” ìœ„ì™€ ê°™ì€ ê·¸ë¦¼ìœ¼ë¡œ ë‚˜íƒ€ë‚œë‹¤.     
ì‚¬ìš©ì˜ì—­ì€ ìì‹ ì´ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë§Œ ì‹ ê²½ì“°ëŠ” ê²ƒì´ë‹¤.     
  
## ê°ì²´ì§€í–¥ ì„¤ê³„ 5ëŒ€ ì›ì¹™ ì ìš© 
ì—¬ê¸°ê¹Œì§€ 3ê°€ì§€ `SRP`,`DIP`,`OCP` ì›ì¹™ì„ ì ìš©ì‹œì¼°ë‹¤.     

### SRP, ë‹¨ì¼ ì±…ì„ ì›ì¹™  
> í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ì„ ê°€ì ¸ì•¼í•œë‹¤.  
    
* í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì§ì ‘ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆë‹¤.      
* SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ë”°ë¥´ë©´ì„œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•œë‹¤.     
* êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ AppConfigê°€ ë‹´ë‹¹í•œë‹¤.      
* í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹í•œë‹¤.   

### DIP, ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™   
> ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤.   
> - `ì˜ì¡´ì„± ì£¼ì…`ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë‹¤.  
   
* ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ê°œë°œí•˜ê³ , ì ìš©í•˜ëŸ¬ê³  í•˜ë‹ˆ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í•œë‹¤.   
  ì™œëƒí•˜ë©´ ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ `OrderServiceImpl`ëŠ”    
  `DIP`ë¥¼ ì§€í‚¤ë©° `DiscountPolicy` ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ëŠ” ê²ƒ ê°™ì§€ë§Œ   
  `FixDiscountPolicy`ê¹Œì§€ í•¨ê»˜ ì˜ì¡´í•˜ê³  ìˆì—ˆë˜ ê²ƒì´ë‹¤.   
* í´ë¼ì´ì–¸íŠ¸ê°€ ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•˜ë„ë¡ í•´ì•¼í•˜ë©° êµ¬í˜„ì²´ëŠ” ìƒì„±ìë¥¼ í†µí•´ ì£¼ì…ì‹œí‚¤ë„ë¡ í•œë‹¤.  

### OCP, ê°œë°© íì‡„ ì›ì¹™  
> ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì •ì—ëŠ” ì—´ë ¤ìˆìœ¼ë‚˜, ë³€ê²½ì—ëŠ” ë‹«í˜€ìˆì–´ì•¼ í•œë‹¤.   
    
* ë‹¤í˜•ì„±ì„ ì‚¬ìš©í•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ DIPë¥¼ ì§€í‚¨ë‹¤.     
* ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš© ì˜ì—­ê³¼ êµ¬ì„± ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆˆë‹¤.  
* AppConfigê°€ ì˜ì¡´ê´€ê³„ë¥¼ `FixDiscountPolicy`ì—ì„œ `RateDiscountPolicy`ë¡œ ë³€ê²½í•´ì„œ   
  í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì£¼ì…í•˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.  
* **ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì˜ì—­ì˜ ë³€ê²½ì€ ë‹«í˜€ìˆë‹¤.**     

## IoC, DI, ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ  
**IoC, ì œì–´ì˜ ì—­ì „**    
* ê¸°ì¡´ í”„ë¡œê·¸ë¨ì€ í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê°ì²´ê°€ ìŠ¤ìŠ¤ë¡œ í•„ìš”í•œ ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í–ˆë‹¤.    
  í•œë§ˆë””ë¡œ êµ¬í˜„ ê°ì²´ê°€ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ìŠ¤ìŠ¤ë¡œ ì¡°ì¢…í–ˆë‹¤.
  ê°œë°œì ì…ì¥ì—ì„œëŠ” ë§¤ìš° ìì—°ìŠ¤ëŸ¬ìš´ íë¦„ì´ì—ˆë‹¤.  
* `AppConfig`ì˜ ë“±ì¥ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•˜ê²Œ ë˜ì—ˆë‹¤.  
* í”„ë¡œê·¸ë¨ì— ëŒ€í•œ ì œì–´ íë¦„ì— ëŒ€í•œ ê¶Œí•œì€ `AppConfig`ê°€ ê°€ì§€ê³  ìˆë‹¤.   
  ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ë¥¼ ë‹¤ë£¨ë¯€ë¡œ ë¡œì§ì˜ ì£¼ë„ê¶Œì„ ì¡ê³ ìˆë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.        
* ì´ë ‡ë“¯ **í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒ**ì„ **ì œì–´ì˜ ì—­ì „**ì´ë¼ê³  í•œë‹¤.   

**í”„ë ˆì„ì›Œí¬ VS ë¼ì´ë¸ŒëŸ¬ë¦¬**    
* í”„ë ˆì„ì›Œí¬ : ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•˜ê³ , ëŒ€ì‹  ì‹¤í–‰í•œë‹¤.  
* ë¼ì´ë¸ŒëŸ¬ë¦¬ : ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ë‚´ê°€ ì§ì ‘ ì œì–´í•œë‹¤.  
* í•„ì ì˜ê²¬ : ë‚´ê°€ ì •í•´ì§„ í‹€ì— ë§ì¶”ì–´ ì½”ë”©, ë‚´ê°€ ì—¬ëŸ¬ ë„êµ¬ë¥¼ í™œìš©í•´ì„œ ì½”ë”©  

**DI, ì˜ì¡´ê´€ê³„ ì£¼ì…**   
* ì˜ì¡´ê´€ê³„ëŠ” **ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ì™€,**    
  **ì‹¤í–‰ ì‹œì ì— ê²°ì •ë˜ëŠ” ë™ì ì¸ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„** ë‘˜ì„ ë¶„ë¦¬í•˜ë©´ì„œ ìƒê°í•´ì•¼í•œë‹¤.    
    
**ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„**    
í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” `import`ì½”ë“œë§Œ ë³´ê³ ë„ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ íŒë‹¨í•  ìˆ˜ ìˆë‹¤.   
ì •ì ì¸ ì˜ì¡´ê´€ê³„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë¶„ì„í•  ìˆ˜ ìˆë‹¤.   
      
`OrderServiceImpl`ì€ `MemberServiceImpl`ê³¼ `DiscountPolicy`ì— ì˜ì¡´í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.     
ê·¸ëŸ°ë° ì´ëŸ¬í•œ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë§Œìœ¼ë¡œ ì‹¤ì œ ì–´ë–¤ ê°ì²´ê°€ `OrderServiceImpl`ì— ì£¼ì…ë ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤.  

**ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„**    
ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ì‹¤ì œ ìƒì„±ëœ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ê°€ ì—°ê²°ëœ ì˜ì¡´ê´€ê³„ë‹¤.    

* ì• í”Œë¦¬ì¼€ì´ì…˜ **ì‹¤í–‰ ì‹œì (ëŸ°íƒ€ì„)** ì— ì™¸ë¶€ì—ì„œ ì‹¤ì œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•´ì„œ   
  í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì‹¤ì œ ì˜ì¡´ê´€ê³„ê°€ ì—°ê²°ë˜ëŠ” ê²ƒì„ **ì˜ì¡´ê´€ê³„ ì£¼ì…**ì´ë¼ ë§í•œë‹¤.  
* ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , ê·¸ ì°¸ì¡° ê°’ì„ ì „ë‹¬í•´ì„œ ì—°ê²°ëœë‹¤.  
* ì™¼ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ ,   
  í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ëŒ€ìƒì˜ íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.  
* ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ ,   
  ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.  

**IOC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ**   
* AppConfig ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ ì£¼ëŠ” ê²ƒì„   
  **IoC ì»¨í…Œì´ë„ˆ** ë˜ëŠ” **DI ì»¨í…Œì´ë„ˆ**ë¼ê³  ë¶€ë¥¸ë‹¤.
* ì˜ì¡´ê´€ê³„ ì£¼ì…ì— ì´ˆì ì„ ë§ì¶”ì–´ ìµœê·¼ì—ëŠ” ì£¼ë¡œ **DIì»¨í…Œì´ë„ˆ**ë¼ í•œë‹¤.   
* ë˜ëŠ” ì–´ì…‰ë¸”ëŸ¬, ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬ ë“±ìœ¼ë¡œ ë¶ˆë¦¬ê¸°ë„ í•œë‹¤.   

## ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ê¸°   

**AppConfig**
```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }

}
```

**MemberApp**
```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class MemberApp {

    public static void main(String[] args) {

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);

        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new Member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```

**OrderApp**
```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.order.Order;
import hello.core.order.OrderService;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class OrderApp {
    public static void main(String[] args) {

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);
        OrderService orderService = applicationContext.getBean("orderService", OrderService.class);

        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 20000);

        System.out.println("order = " + order);
        System.out.println("order.calculatePrice() = " + order.calculatePrice());
    }
}
```
   
**ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ**    
* `ApplicationContext`ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ ë¶€ë¥¸ë‹¤.   
* ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ `AppConfig`ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DIë¥¼ í–ˆì§€ë§Œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ ì‚¬ìš©í•œë‹¤.   
* ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `@Configuration`ì´ ë¶™ì€ `AppConfig`ë¥¼ ì„¤ì •(êµ¬ì„±)ì •ë³´ë¡œ ì‚¬ìš©í•œë‹¤.     
  ì—¬ê¸°ì„œ `@Bean`ì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•´ì„œ **ë°˜í™˜ëœ ê°ì²´ë¥¼ `ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ`ì— ë“±ë¡í•œë‹¤.**   
  ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ **ìŠ¤í”„ë§ ë¹ˆ**ì´ë¼ê³  ë§í•œë‹¤.    
* ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ ì§ì ‘ ìë°”ì½”ë“œë¡œ ëª¨ë“  ê²ƒì„ í–ˆë‹¤ë©´ ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³ ,  
  ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì‚¬ìš©í•˜ë‹¤ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.    



```java
// AppConfigëŠ” ë‹¨ìˆœíˆ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë©”ì„œë“œë§Œ ê°€ì§
public class AppConfig {
    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }
}

public class MemberApp {
    public static void main(String[] args) {
        // 1. ê°œë°œìê°€ AppConfigë¥¼ ì§ì ‘ ìƒì„±
        AppConfig appConfig = new AppConfig();
        
        // 2. ê°œë°œìê°€ AppConfigì—ì„œ í•„ìš”í•œ ê°ì²´ë¥¼ ì§ì ‘ êº¼ë‚´ì˜´
        MemberService memberService = appConfig.memberService();

        // 3. ì„œë¹„ìŠ¤ ì‚¬ìš©
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);
    }
}
```
**ì¼ë°˜ ìë°” ì½”ë“œ**

vs

**ìŠ¤í”„ë§ ì½”ë“œ**

```java
// @Configurationê³¼ @Beanì„ í†µí•´ ìŠ¤í”„ë§ì—ê²Œ ì„¤ì • ì •ë³´ë¥¼ ì œê³µ
@Configuration
public class AppConfig {
@Bean
public MemberService memberService() {
return new MemberServiceImpl(new MemoryMemberRepository());
}
}

public class MemberApp {
public static void main(String[] args) {
[cite_start]// 1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± (AppConfigë¥¼ ì„¤ì • ì •ë³´ë¡œ ì‚¬ìš©) [cite: 1]
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);

        [cite_start]// 2. ê°œë°œìëŠ” ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ìŠ¤í”„ë§ ë¹ˆì„ ì´ë¦„ìœ¼ë¡œ ì°¾ì•„ì˜´ [cite: 1]
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);

        // 3. ì„œë¹„ìŠ¤ ì‚¬ìš©
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);
    }
}

```
